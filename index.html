<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>感谢您的评价</title>
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Font Awesome -->
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Tailwind 配置 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#165DFF',
            secondary: '#36D399',
            neutral: {
              100: '#F9FAFB',
              200: '#F3F4F6',
              300: '#E5E7EB',
              400: '#D1D5DB',
              500: '#9CA3AF',
              600: '#6B7280',
              700: '#4B5563',
              800: '#1F2937',
              900: '#111827'
            }
          },
          fontFamily: {
            inter: ['Inter', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .rating-star {
        transition: all 0.2s ease;
      }
      .rating-star:hover,
      .rating-star.active {
        color: #FFD700;
        transform: scale(1.1);
      }
      .animate-float {
        animation: float 3s ease-in-out infinite;
      }
      @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
        100% { transform: translateY(0px); }
      }
    }
  </style>
</head>

<body class="font-inter bg-gradient-to-br from-neutral-100 to-neutral-200 min-h-screen">
  <!-- 页面容器 -->
  <div class="max-w-3xl mx-auto px-4 py-8">
    <!-- 头部区域 -->
    <header class="text-center mb-10">
      <div class="inline-flex items-center justify-center w-16 h-16 bg-primary/10 rounded-full mb-4 animate-float">
        <i class="fa fa-comment text-primary text-2xl"></i>
      </div>
      <h1 class="text-[clamp(1.8rem,5vw,2.5rem)] font-bold text-neutral-800 mb-2">
        感谢您的光临
      </h1>
      <p class="text-neutral-600 max-w-lg mx-auto">
        您的反馈对我们非常重要，它将帮助我们不断提升服务质量
      </p>
    </header>
    
    <!-- 评价表单卡片 -->
    <div class="bg-white rounded-xl shadow-xl overflow-hidden transition-all duration-300 hover:shadow-2xl">
      <!-- 表单步骤指示器 -->
      <div class="bg-primary/5 px-6 py-4 border-b border-primary/10">
        <div class="flex items-center justify-between max-w-md mx-auto">
          <div class="flex flex-col items-center">
            <div class="w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center mb-1">
              <i class="fa fa-star"></i>
            </div>
            <span class="text-xs font-medium text-primary">评分</span>
          </div>
          <div class="h-1 flex-grow mx-2 bg-primary/30"></div>
          <div class="flex flex-col items-center">
            <div class="w-8 h-8 rounded-full bg-neutral-300 text-neutral-600 flex items-center justify-center mb-1">
              <i class="fa fa-pencil"></i>
            </div>
            <span class="text-xs font-medium text-neutral-500">评价</span>
          </div>
          <div class="h-1 flex-grow mx-2 bg-neutral-300"></div>
          <div class="flex flex-col items-center">
            <div class="w-8 h-8 rounded-full bg-neutral-300 text-neutral-600 flex items-center justify-center mb-1">
              <i class="fa fa-check"></i>
            </div>
            <span class="text-xs font-medium text-neutral-500">完成</span>
          </div>
        </div>
      </div>
      
      <!-- 表单内容 -->
      <div class="p-6">
        <!-- 评分区域 -->
        <div id="rating-section" class="space-y-6">
          <div class="text-center mb-6">
            <h2 class="text-xl font-semibold text-neutral-800 mb-2">您对我们的服务满意吗？</h2>
            <p class="text-neutral-600">请给我们的服务评分</p>
          </div>
          
          <div class="flex justify-center space-x-4">
            <i class="fa fa-star text-4xl rating-star cursor-pointer" data-rating="1"></i>
            <i class="fa fa-star text-4xl rating-star cursor-pointer" data-rating="2"></i>
            <i class="fa fa-star text-4xl rating-star cursor-pointer" data-rating="3"></i>
            <i class="fa fa-star text-4xl rating-star cursor-pointer" data-rating="4"></i>
            <i class="fa fa-star text-4xl rating-star cursor-pointer" data-rating="5"></i>
          </div>
          
          <div class="mt-8">
            <button id="next-to-review" class="w-full bg-primary hover:bg-primary/90 text-white font-medium py-3 px-4 rounded-lg transition-all duration-300 transform hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-primary/50 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
              继续评价
            </button>
          </div>
        </div>
        
        <!-- 评价内容区域 (默认隐藏) -->
        <div id="review-section" class="space-y-6 hidden">
          <div class="text-center mb-6">
            <h2 class="text-xl font-semibold text-neutral-800 mb-2">请分享您的体验</h2>
            <p class="text-neutral-600">告诉我们哪些地方做得好，哪些地方可以改进</p>
          </div>
          
          <div class="space-y-4">
            <div>
              <label for="review" class="block text-sm font-medium text-neutral-700 mb-1">您的评价</label>
              <textarea id="review" rows="4" class="w-full px-4 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200" placeholder="请输入您的评价内容..."></textarea>
            </div>
            
            <div>
              <label for="name" class="block text-sm font-medium text-neutral-700 mb-1">您的姓名 (选填)</label>
              <input type="text" id="name" class="w-full px-4 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200" placeholder="您的姓名">
            </div>
            
            <div>
              <label for="contact" class="block text-sm font-medium text-neutral-700 mb-1">联系方式 (选填)</label>
              <input type="text" id="contact" class="w-full px-4 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200" placeholder="手机号码或电子邮箱">
            </div>
          </div>
          
          <div class="flex flex-col space-y-3 mt-8">
            <button id="submit-review" class="w-full bg-secondary hover:bg-secondary/90 text-white font-medium py-3 px-4 rounded-lg transition-all duration-300 transform hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-secondary/50">
              提交评价
            </button>
            <button id="back-to-rating" class="w-full bg-transparent hover:bg-neutral-100 text-neutral-700 font-medium py-3 px-4 rounded-lg transition-all duration-300 border border-neutral-300">
              返回评分
            </button>
          </div>
        </div>
        
        <!-- 提交成功区域 (默认隐藏) -->
        <div id="success-section" class="text-center py-8 hidden">
          <div class="inline-flex items-center justify-center w-20 h-20 bg-secondary/10 rounded-full mb-6 mx-auto">
            <i class="fa fa-check text-4xl text-secondary"></i>
          </div>
          <h2 class="text-2xl font-bold text-neutral-800 mb-2">感谢您的评价！</h2>
          <p class="text-neutral-600 mb-8">
            您的反馈对我们非常重要，我们会不断改进服务质量
          </p>
          <div class="bg-neutral-100 rounded-lg p-4 mb-8">
            <div class="flex items-center justify-center space-x-2 mb-2">
              <div id="final-rating" class="flex">
                <!-- 动态生成星星 -->
              </div>
            </div>
            <p id="final-review" class="text-neutral-700 italic"></p>
          </div>
          <button id="submit-another" class="bg-primary hover:bg-primary/90 text-white font-medium py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-primary/50">
            提交另一条评价
          </button>
        </div>
      </div>
    </div>
    
    <!-- 页脚 -->
    <footer class="mt-12 text-center text-neutral-500 text-sm">
      <p>© 2023 好评智能卡系统 | 感谢您的支持</p>
    </footer>
  </div>

  <!-- 数据提交加载动画 (默认隐藏) -->
  <div id="loading-overlay" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-xl p-8 shadow-2xl">
      <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"></div>
      <p class="text-center text-neutral-700 font-medium">正在提交您的评价...</p>
    </div>
  </div>

  <!-- JavaScript -->
  <script>
    // DOM 元素
    const ratingStars = document.querySelectorAll('.rating-star');
    const nextToReviewBtn = document.getElementById('next-to-review');
    const backToRatingBtn = document.getElementById('back-to-rating');
    const submitReviewBtn = document.getElementById('submit-review');
    const submitAnotherBtn = document.getElementById('submit-another');
    const ratingSection = document.getElementById('rating-section');
    const reviewSection = document.getElementById('review-section');
    const successSection = document.getElementById('success-section');
    const loadingOverlay = document.getElementById('loading-overlay');
    const reviewTextarea = document.getElementById('review');
    const nameInput = document.getElementById('name');
    const contactInput = document.getElementById('contact');
    const finalRating = document.getElementById('final-rating');
    const finalReview = document.getElementById('final-review');
    
    let selectedRating = 0;
    
    // 评分星星交互
    ratingStars.forEach(star => {
      star.addEventListener('click', () => {
        const rating = parseInt(star.dataset.rating);
        selectedRating = rating;
        
        // 更新星星状态
        ratingStars.forEach(s => {
          const sRating = parseInt(s.dataset.rating);
          if (sRating <= rating) {
            s.classList.add('active');
          } else {
            s.classList.remove('active');
          }
        });
        
        // 启用下一步按钮
        nextToReviewBtn.disabled = false;
      });
    });
    
    // 切换到评价表单
    nextToReviewBtn.addEventListener('click', () => {
      ratingSection.classList.add('hidden');
      reviewSection.classList.remove('hidden');
      
      // 更新步骤指示器
      updateStepIndicator(2);
      
      // 自动聚焦到评价文本框
      setTimeout(() => {
        reviewTextarea.focus();
      }, 100);
    });
    
    // 返回评分页面
    backToRatingBtn.addEventListener('click', () => {
      reviewSection.classList.add('hidden');
      ratingSection.classList.remove('hidden');
      
      // 更新步骤指示器
      updateStepIndicator(1);
    });
    
    // 提交评价
    submitReviewBtn.addEventListener('click', () => {
      // 显示加载动画
      loadingOverlay.classList.remove('hidden');
      
      // 模拟API请求延迟
      setTimeout(() => {
        // 隐藏加载动画
        loadingOverlay.classList.add('hidden');
        
        // 显示成功页面
        reviewSection.classList.add('hidden');
        successSection.classList.remove('hidden');
        
        // 更新步骤指示器
        updateStepIndicator(3);
        
        // 显示提交的评价
        displaySubmittedReview();
      }, 1500);
    });
    
    // 提交另一条评价
    submitAnotherBtn.addEventListener('click', () => {
      // 重置表单
      resetForm();
      
      // 显示评分页面
      successSection.classList.add('hidden');
      ratingSection.classList.remove('hidden');
      
      // 更新步骤指示器
      updateStepIndicator(1);
    });
    
    // 更新步骤指示器
    function updateStepIndicator(activeStep) {
      const indicators = document.querySelectorAll('.flex-col');
      const lines = document.querySelectorAll('.flex-grow');
      
      indicators.forEach((indicator, index) => {
        const circle = indicator.querySelector('div');
        const text = indicator.querySelector('span');
        
        if (index + 1 < activeStep) {
          // 已完成步骤
          circle.classList.remove('bg-neutral-300', 'text-neutral-600');
          circle.classList.add('bg-secondary', 'text-white');
          text.classList.remove('text-neutral-500');
          text.classList.add('text-secondary');
        } else if (index + 1 === activeStep) {
          // 当前步骤
          circle.classList.remove('bg-neutral-300', 'text-neutral-600');
          circle.classList.add('bg-primary', 'text-white');
          text.classList.remove('text-neutral-500');
          text.classList.add('text-primary');
        } else {
          // 未完成步骤
          circle.classList.remove('bg-secondary', 'text-white', 'bg-primary');
          circle.classList.add('bg-neutral-300', 'text-neutral-600');
          text.classList.remove('text-secondary', 'text-primary');
          text.classList.add('text-neutral-500');
        }
      });
      
      lines.forEach((line, index) => {
        if (index + 1 < activeStep) {
          // 已完成连接线
          line.classList.remove('bg-neutral-300');
          line.classList.add('bg-secondary');
        } else {
          // 未完成连接线
          line.classList.remove('bg-secondary');
          line.classList.add('bg-neutral-300');
        }
      });
    }
    
    // 显示提交的评价
    function displaySubmittedReview() {
      // 清空星星容器
      finalRating.innerHTML = '';
      
      // 生成星星
      for (let i = 1; i <= 5; i++) {
        const star = document.createElement('i');
        star.className = 'fa fa-star text-2xl';
        if (i <= selectedRating) {
          star.classList.add('text-yellow-400');
        } else {
          star.classList.add('text-neutral-300');
        }
        finalRating.appendChild(star);
      }
      
      // 显示评价内容
      const review = reviewTextarea.value.trim() || '未提供详细评价';
      finalReview.textContent = review;
    }
    
    // 重置表单
    function resetForm() {
      selectedRating = 0;
      ratingStars.forEach(star => {
        star.classList.remove('active');
      });
      nextToReviewBtn.disabled = true;
      reviewTextarea.value = '';
      nameInput.value = '';
      contactInput.value = '';
    }
    
    // 自动获取卡片信息（如果有）
    function getCardInfo() {
      const params = new URLSearchParams(window.location.search);
      const cardId = params.get('cardId');
      
      if (cardId) {
        // 这里可以根据卡片ID获取相关信息
        console.log('Card ID:', cardId);
        // 可以显示店铺信息或其他相关内容
      }
    }
    
    // 页面加载时获取卡片信息
    window.addEventListener('DOMContentLoaded', getCardInfo);
  </script>
</body>
</html>
